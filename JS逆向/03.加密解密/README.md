# 3. 加密解密

## 3.1. 基本概念

- 加密：通过算法和密钥将数据（明文）转换为无法阅读的形式（密文）
- 解密：通过同样的算法和密钥将密文转为明文

### 3.1.1. 加密情景

1. 发送请求时，数据从客户端发送至服务端的过程中，可能被他人获取 -> 如果加密了，别人就看不懂
2. 对抗爬虫，使爬虫模拟请求变复杂

- 所以这种情况下，服务端只认加密了的数据，我们模拟请求时也需要进行加密 -> 调试网站js代码，找到加密的算法和密钥

### 3.1.2. 解密情景

- 服务端的响应进行了加密，我们需要进行解密

### 3.1.3. 使用

- 安装模块：`pip install pycryptodome`
- 导入模块：`import Crypto`

### 3.1.4. 共同特征

- 输入明文为二进制数据，输出密文为二进制数据，一般对密文进行`base64`编码或转为16进制字符串
- 密钥、偏移量也都是二进制数据

## 3.2. `DES`加解密

- 加解密使用相同密钥
- 每次处理8字节的明文，输出8字节密文
- 密钥长度：8字节
- 偏移量长度：8字节
- 已经不安全，易受暴力破解
- 模式（不同模式存在本质区别）：
    - `ECB`：需要密钥
    - `CBC`：需要密钥（key）、偏移量（iv）
- 填充（padding）
    - 明文必须是8字节的整数倍，否则需要进行填充：向原始数据末尾添加额外字节
    - 存在不同的填充方案，只是填充不同的字符这样一个区别
        - pkcs7：填充了n个字符，填充字符就是`\x0n`
        - x923：填充了n个字符，最后一个填充字符就是`\x0n`，其余的是`\x00`
        - iso7816：第一个填充字符为`\x80`，其余的是`\x00`
    - 解密时也需要去除填充，需要填充的加密算法使用的填充方式都是一致的

## 3.3. `3DES`加解密

- 对数据进行3次`DES`加密
- 有两种密钥模式
    - 2-key：长度16字节
    - 3-key（更安全）：长度24字节
- 偏移量长度：8字节
- 模式（不同模式存在本质区别）：
    - `ECB`：需要密钥
    - `CBC`：需要密钥（key）、偏移量（iv）
- 比`DES`安全，但速度和安全性仍差于`AES`

## 3.4. `AES`加解密

- 使用最广泛的对称加密算法
- 分组加密：每次处理16字节的明文
- 密钥长度
    - AES-128：128位密钥（16字节）
    - AES-192：192位密钥（24字节）
    - AES-256：256位密钥（32字节）
- 偏移量长度：16字节
- 模式（不同模式存在本质区别）：
    - `ECB`：需要密钥
    - `CBC`：需要密钥（key）、偏移量（iv）

## 3.5. `RSA`加解密

- 使用最广泛的非对称加密算法
- 公钥（Public Key）：公开用于加密
- 私钥（Private Key）：保密用于解密
- 密钥长度：128、256、384、512字节
- 能够加密的明文长度有限，短于密钥长度
- 计算量大，计算速度慢
- 同样的密钥和明文，得到不一样的密文
